<mat-form-field 
	#formFieldRef
	cdkOverlayOrigin 
	#trigger="cdkOverlayOrigin"
	(click)="toggleOverlayStatus()" 
  class="w-full hs-density--5"
>
  <mat-label 		
    (click)="$event.stopPropagation()" 
  >Clearable input</mat-label>
  <input
		matInput
		type="text"
		[(ngModel)]="value"
		placeholder="你好世界"
	>
  @if (value) {
    <button matSuffix mat-icon-button aria-label="Clear" (click)="value=''" class="hs-icon-button-24 mr-3px">
      <mat-icon>close</mat-icon>
    </button>
  }
</mat-form-field>

<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="isOpenOverlay()"
>
  <div #overlayElement  [style.width.px]="formFieldRefWidth" class="hs-overlay-container">
    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="hs-tree-select-container">
      <mat-tree-node class="hs-tree-select-node" *matTreeNodeDef="let node" matTreeNodeToggle>
        <mat-checkbox class="hs-tree-select-checkbox hs-density--5">
          {{node.name}}
        </mat-checkbox>
      </mat-tree-node>
      <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
          <div class="mat-tree-node hs-tree-select-node" matTreeNodeToggle>
            <button mat-icon-button matTreeNodeToggle class="hs-icon-button-24"
                    [attr.aria-label]="'Toggle ' + node.name">
              <mat-icon class="mat-icon-rtl-mirror">
                {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
              </mat-icon>
            </button>
            {{node.name}}
          </div>
          <div [class.hs-tree-select-invisible]="!treeControl.isExpanded(node)"
              role="group">
            <ng-container matTreeNodeOutlet></ng-container>
        </div>
      </mat-nested-tree-node>
    </mat-tree>
  </div>
</ng-template>